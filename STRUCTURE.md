# ๐ ุจููุฉ ุงููุฌูุฏ my-cordova-api-new

## ๐ฏ ุงูุบุฑุถ
ูุฐุง ุงููุฌูุฏ ูุญุชูู ุนูู:
1. **Client-Side Code**: ูููุงุช ุงูุชุทุจูู ุงูุชู ุชุฑุณู ุทูุจุงุช ุฅูู ุงูุณูุฑูุฑ
2. **Server-Side Code**: ูููุงุช ุงูุณูุฑูุฑ ุงูุชู ุชุนูู ุนูู Render

---

## ๐ฑ Client-Side Files (ุงูุชุทุจูู)

### ูููุงุช ุงูุงุชุตุงู ุจุงูุณูุฑูุฑ:
- **config.js**: ูุญุชูู ุนูู ุฑุงุจุท ุงูุณูุฑูุฑ ุงููุญูุฏ
  ```javascript
  BASE_URL = "https://my-cordova.onrender.com"
  ```

- **helper.js**: ูุธุงุฆู ูุณุงุนุฏุฉ ูุฅุฑุณุงู ุทูุจุงุช HTTP
  - `sendRequest()`: ุฅุฑุณุงู ุทูุจุงุช GET/POST

- **doctor.js**: ุฅุฑุณุงู ุฃุณุฆูุฉ ููุทุจูุจ ุงููุจุงุชู
  - `sendDoctorRequest()`: ูุฑุณู POST ุฅูู `/doctor`
  - โ ูุง ูุญุชูู ุนูู API Key

- **analyze.js**: ุฅุฑุณุงู ุตูุฑ ููุชุญููู
  - `sendAnalyzeRequest()`: ูุฑุณู POST ุฅูู `/analyze`
  - โ ูุง ูุญุชูู ุนูู API Key

- **ads.js**: ุฌูุจ ุฅุนุฏุงุฏุงุช ุงูุฅุนูุงูุงุช
  - `getAds()`: ูุฑุณู GET ุฅูู `/ads`

- **api.js**: ูุงุฌูุฉ ููุญุฏุฉ ูุฌููุน ุงููุธุงุฆู
  - `askDoctor()`
  - `analyzePlant()`
  - `getAdsConfig()`

- **index.js**: ููุทุฉ ุงูุฏุฎูู ุงูุฑุฆูุณูุฉ ููุชุทุจูู

---

## ๐ฅ๏ธ Server-Side Files (ุงูุณูุฑูุฑ ุนูู Render)

### ูุฌูุฏ server-handlers:
- **doctor.handler.js**: ูุนุงูุฌ ุงูุฏุฑุฏุดุฉ (Server-Side)
  - ูุณุชูุจู ุงูุฃุณุฆูุฉ ูู ุงูุชุทุจูู
  - ูุฑุณููุง ุฅูู OpenAI API
  - ูุนูุฏ ุงูุฑุฏูุฏ

- **analyze.handler.js**: ูุนุงูุฌ ุชุญููู ุงูุตูุฑ (Server-Side)
  - ูุณุชูุจู ุงูุตูุฑ ูู ุงูุชุทุจูู
  - ูุฑุณููุง ุฅูู OpenAI API
  - ูุนูุฏ ูุชุงุฆุฌ ุงูุชุญููู

- **ads.handler.js**: ูุนุงูุฌ ุงูุฅุนูุงูุงุช (Server-Side)
  - ูุฌูุจ ุงูุจูุงูุงุช ูู Google Sheets
  - ุฃู ูู ููู ูุญูู ูู fallback

### ูููุงุช ุงูุณูุฑูุฑ ุงูุฑุฆูุณูุฉ:
- **server.js**: ุงูุณูุฑูุฑ ุงูุฑุฆูุณู ุนูู Render
  - ูุญุชูู ุนูู ุฌููุน ุงูู Routes
  - ููุฑุฃ OpenAI API Key ูู Environment Variables
  - ุงูููุงูุฐ ุงููุชุงุญุฉ:
    ```
    GET  /           - ุญุงูุฉ ุงูุณูุฑูุฑ
    GET  /config     - ุงูุฅุนุฏุงุฏุงุช ุงูุนุงูุฉ
    GET  /ads        - ุงูุฅุนูุงูุงุช
    POST /doctor     - ุงูุฏุฑุฏุดุฉ
    POST /analyze    - ุชุญููู ุงูุตูุฑ
    POST /api/diagnose - ููุณ /analyze
    ```

---

## ๐ ุณูุฑ ุงูุนูู

### 1. ุงูุฏุฑุฏุดุฉ ูุน ุงูุทุจูุจ:
```
ุงูุชุทุจูู โ doctor.js โ helper.js โ https://my-cordova.onrender.com/doctor
                                            โ
ุงูุณูุฑูุฑ โ server.js โ doctor.handler.js โ OpenAI API
                                            โ
                                         ุงููุชูุฌุฉ โ 
```

### 2. ุชุญููู ุงูุตูุฑ:
```
ุงูุชุทุจูู โ analyze.js โ helper.js โ https://my-cordova.onrender.com/analyze
                                             โ
ุงูุณูุฑูุฑ โ server.js โ analyze.handler.js โ OpenAI API
                                             โ
                                          ุงููุชูุฌุฉ โ 
```

### 3. ุฌูุจ ุงูุฅุนูุงูุงุช:
```
ุงูุชุทุจูู โ ads.js โ helper.js โ https://my-cordova.onrender.com/ads
                                        โ
ุงูุณูุฑูุฑ โ server.js โ ads.handler.js โ Google Sheets
                                        โ
                                     ุงููุชูุฌุฉ โ 
```

---

## ๐ ุงูุฃูุงู

โ **Client-Side (ุงูุชุทุจูู)**:
- ูุง ูุญุชูู ุนูู ุฃู API Keys
- ููุท ูุฑุณู ุทูุจุงุช ุฅูู ุงูุณูุฑูุฑ
- ุงูุจูุงูุงุช ุงูุญุณุงุณุฉ ููุฌูุฏุฉ ููุท ุนูู ุงูุณูุฑูุฑ

โ **Server-Side (Render)**:
- OpenAI API Key ูู Environment Variables
- Google Sheets URL ูู Environment Variables
- ูุง ูุชู ุชุฎุฒูู ุฃู ููุงุชูุญ ูู ุงูููุฏ

---

## ๐ฆ ูููุงุช ุงูุชูููู

- **config.json**: ุฅุนุฏุงุฏุงุช ุนุงูุฉ (ุบูุฑ ุญุณุงุณุฉ)
- **ads.json**: Fallback ููุฅุนูุงูุงุช
- **package.json**: Dependencies ููุณูุฑูุฑ
- **.env.example**: ูุซุงู ุนูู ูุชุบูุฑุงุช ุงูุจูุฆุฉ

---

## ๐ ุงููุดุฑ

### ุนูู Render:
1. ุฑูุน ุงููุฌูุฏ ูุงูู ุฅูู Render
2. ุชุนููู Environment Variables:
   - `OPENAI_API_KEY`
   - `ADS_SHEETS_URL`
3. Start Command: `node server.js`
4. Port: `10000` (ุฃู ูู Environment Variable)

### ูู ุงูุชุทุจูู:
1. ุงุณุชูุฑุงุฏ `index.js` ุฃู `api.js`
2. ุงุณุชุฎุฏุงู ุงููุธุงุฆู ุงููุชุงุญุฉ
3. ุฌููุน ุงูุทูุจุงุช ุชุฐูุจ ุชููุงุฆูุงู ุฅูู Render

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### "failed to analyze, please try again"
- ุชุญูู ูู ุงูุงุชุตุงู ุจุงูุฅูุชุฑูุช
- ุชุญูู ูู ุฃู ุงูุณูุฑูุฑ ูุนูู: `https://my-cordova.onrender.com`
- ุชุญูู ูู Logs ุนูู Render

### "Sorry, chat service is currently unavailable"
- ุชุญูู ูู OpenAI API Key ุนูู Render
- ุชุญูู ูู Quota ุนูู OpenAI
- ุชุญูู ูู Logs ุนูู Render

---

## ๐ ููุงุท ุงูููุงูุฉ (Endpoints)

| ุงููุณุงุฑ | ุงูููุน | ุงููุตู |
|--------|------|-------|
| `/` | GET | ุญุงูุฉ ุงูุณูุฑูุฑ |
| `/config` | GET | ุฅุนุฏุงุฏุงุช ุนุงูุฉ |
| `/ads` | GET | ุฅุนุฏุงุฏุงุช ุงูุฅุนูุงูุงุช |
| `/doctor` | POST | ุงูุฏุฑุฏุดุฉ ูุน ุงูุทุจูุจ |
| `/analyze` | POST | ุชุญููู ุตูุฑุฉ ูุจุงุช |
| `/api/diagnose` | POST | ุชุญููู ุตูุฑุฉ (ุจุฏูู) |

---

## โ ุงูุชุญุฏูุซุงุช

### ูุง ุชู ุฅุตูุงุญู:
1. โ ูุตู Client-Side ุนู Server-Side
2. โ ุฅุฒุงูุฉ ุฌููุน API Keys ูู ุงูุชุทุจูู
3. โ ุชูุญูุฏ ุฑุงุจุท ุงูุณูุฑูุฑ ูู ููู ูุงุญุฏ (config.js)
4. โ ุฅุตูุงุญ ุฃุฎุทุงุก "failed to analyze"
5. โ ุฅุตูุงุญ ุฃุฎุทุงุก "chat service unavailable"
6. โ ุฌููุน ุงูุทูุจุงุช ุชุณุชุฎุฏู https://my-cordova.onrender.com

---

ุชู ุงูุชุญุฏูุซ: **2025-12-07**
