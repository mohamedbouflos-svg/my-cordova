# ๐ฆ ูุฌูุฏ Cordova API - ุฏููู ุงูุงุณุชุฎุฏุงู

## ๐ฏ ุงููุตู
ูุฐุง ุงููุฌูุฏ ูุญุชูู ุนูู **ุงูุณูุฑูุฑ** ู**API ูู ุฌุงูุจ ุงูุนููู** ููุชูุงุตู ูุน ุชุทุจูู Plant Doctor.

---

## ๐ ุงููููุงุช ุงูููุฌูุฏุฉ

### **ุฃ) ูููุงุช ุงูุณูุฑูุฑ (Server-Side) - ููุชุดุบูู ุนูู Render**

1. **`server.js`** - ุงูุณูุฑูุฑ ุงูุฑุฆูุณู (Node.js + Express)
   - ูุณุชูุน ุนูู ุงููููุฐ ุงููุญุฏุฏ ูู `PORT` environment variable
   - ูููุฑ ุฌููุน endpoints ุงููุทููุจุฉ

2. **`doctor.js`** - Handler ููุนุงูุฌุฉ ุทูุจุงุช ุงูุฏุฑุฏุดุฉ
   - Endpoint: `POST /doctor`
   - ูุณุชูุจู: `{ question, language, history }`
   - ูุนูุฏ: `{ success, answer, timestamp }`

3. **`analyze.js`** - Handler ูุชุญููู ุตูุฑ ุงููุจุงุชุงุช
   - Endpoint: `POST /analyze` & `POST /api/diagnose`
   - ูุณุชูุจู: `{ base64Image, language }`
   - ูุนูุฏ: `{ success, plantName, healthStatus, diseaseName, ... }`

4. **`ads.js`** - Handler ูุฌูุจ ุฅุนุฏุงุฏุงุช ุงูุฅุนูุงูุงุช
   - Endpoint: `GET /ads`
   - ูุฌูุจ ุงูุจูุงูุงุช ูู Google Sheets ุฃู ููู ูุญูู

5. **`config.json`** - ุฅุนุฏุงุฏุงุช ุงูุณูุฑูุฑ (ุบูุฑ ุญุณุงุณุฉ)

---

### **ุจ) ูููุงุช API ูู ุฌุงูุจ ุงูุนููู (Client-Side) - ููุงุณุชุฎุฏุงู ูู ุงูุชุทุจูู**

โ๏ธ **ููุงุญุธุฉ ูููุฉ**: ูุฐู ุงููููุงุช ููุฌูุฏุฉ ููู **ุงูุชุทุจูู ุญุงููุงู ูุณุชุฎุฏู `geminiService.ts`** ุจุฏูุงู ูููุง.

1. **`config.js`** - ููู ุงูุฅุนุฏุงุฏุงุช ุงููุญูุฏ
   ```javascript
   export const BASE_URL = "https://my-cordova.onrender.com";
   ```
   - **ูุฐุง ูู ุงูููุงู ุงููุญูุฏ ุงูุฐู ูุฌุจ ุชุบููุฑ ุฑุงุจุท ุงูุณูุฑูุฑ ููู**

2. **`index.js`** - ุงููุฏุฎู ุงูุฑุฆูุณู ููู API
3. **`api.js`** - ูุฌูุน ุฌููุน ุงููุธุงุฆู (doctor, analyze, ads)
4. **`helper.js`** - ูุธุงุฆู ูุณุงุนุฏุฉ ููุงุชุตุงู ุจุงูุณูุฑูุฑ

---

## โ ุงูุฅุตูุงุญุงุช ุงููููุฐุฉ

### **1. ุชู ุฅุตูุงุญ ูุดููุฉ `/api/diagnose`**
- ุงูุณูุฑูุฑ ุงูุขู ูุฏุนู ููุงู ูู:
  - `POST /analyze` (ุงููุณุงุฑ ุงูุฃุตูู)
  - `POST /api/diagnose` (ุงููุณุงุฑ ุงูุฐู ููุงุฏู ุงูุชุทุจูู)

### **2. ุชู ุฅุตูุงุญ ุฎุทุฃ ูู doctor.js**
- ูุงู ูุนูุฏ `success: false` ุญุชู ุนูุฏ ุงููุฌุงุญ
- ุงูุขู ูุนูุฏ `success: true` ุนูุฏ ุงููุฌุงุญ

### **3. ุชู ุชุญุณูู analyze.js**
- ุฅุถุงูุฉ ููู ุงูุชุฑุงุถูุฉ ูุฌููุน ุงูุญููู ุงููุทููุจุฉ
- ุชุญุณูู ุงุณุชุฎุฑุงุฌ JSON ูู ุฑุฏ OpenAI

### **4. ุฌููุน ุงููููุงุช ุชุณุชุฎุฏู BASE_URL ูู config.js**
- `config.js` ูู ุงููุตุฏุฑ ุงููุญูุฏ ููุฑุงุจุท

---

## ๐ ููููุฉ ุงูุชุดุบูู

### **ุนูู Render (ุงูุณูุฑูุฑ):**

1. ุงุฑูุน ุงููุฌูุฏ ุงููุงูู ุฅูู Render
2. ุชุฃูุฏ ูู ุฅุถุงูุฉ ูุชุบูุฑ ุงูุจูุฆุฉ: `OPENAI_API_KEY`
3. ุงูุฃูุฑ: `node server.js`
4. ุงูุณูุฑูุฑ ุณูุนูู ุนูู: `https://my-cordova.onrender.com`

### **ูู ุงูุชุทุจูู (Cordova):**

ุงูุชุทุจูู ุญุงูููุง ูุณุชุฎุฏู `geminiService.ts` ุงูุฐู ูุญุชูู ุนูู:
```typescript
const API_BASE_URL = "https://my-cordova.onrender.com";
```

โ **ูุง ุญุงุฌุฉ ูุชุบููุฑ ุดูุก ูู ุงูุชุทุจูู** - ูู ุดูุก ูุนูู!

---

## ๐๏ธ endpoints ุงููุชุงุญุฉ

| Endpoint | Method | Description |
|----------|--------|-------------|
| `/` | GET | ุญุงูุฉ ุงูุณูุฑูุฑ |
| `/config` | GET | ุงูุฅุนุฏุงุฏุงุช ุงูุนุงูุฉ |
| `/ads` | GET | ุฅุนุฏุงุฏุงุช ุงูุฅุนูุงูุงุช |
| `/doctor` | POST | ุงูุฏุฑุฏุดุฉ ูุน ุงูุทุจูุจ |
| `/analyze` | POST | ุชุญููู ุตูุฑ ุงููุจุงุชุงุช |
| `/api/diagnose` | POST | ุชุญููู ุตูุฑ ุงููุจุงุชุงุช (ูุณุงุฑ ุจุฏูู) |

---

## โ๏ธ ุงูุฃุฎุทุงุก ุงูุชู ุชู ุญููุง

### โ **Cannot GET /doctor**
**ุงูุญู**: endpoint ูุฌุจ ุฃู ูููู POST ูููุณ GET

### โ **Sorry, chat service is currently unavailable**
**ุงูุญู**: ุชู ุฅุตูุงุญ ูููุฉ `success` ูู doctor.js

### โ **failed to analyze please try again**
**ุงูุญู**: 
1. ุชู ุฅุถุงูุฉ `/api/diagnose` endpoint
2. ุชู ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูู analyze.js

---

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ุงูููุชุงุญ ุงูุณุฑู (OpenAI API Key)**:
   - ูุฌุจ ุฃู ูููู ูู ูุชุบูุฑุงุช ุงูุจูุฆุฉ ุนูู Render ููุท
   - ูุง ูุฌุจ ูุชุงุจุชู ูู ุฃู ููู ูู ุงูุชุทุจูู

2. **ุฑุงุจุท ุงูุณูุฑูุฑ**:
   - ูู `config.js`: `https://my-cordova.onrender.com`
   - ูู `geminiService.ts`: `https://my-cordova.onrender.com`
   - ูุฌุจ ุฃู ููููุง ูุชุทุงุจููู

3. **ุงููููุงุช ุงูุชู ุชู ุฅูุดุงุคูุง**:
   - `config.js`, `api.js`, `helper.js`, `index.js`
   - ูุฐู ููุฌูุฏุฉ ููุงุณุชุฎุฏุงู ุงููุณุชูุจูู
   - ุญุงููุงู ุงูุชุทุจูู ูุณุชุฎุฏู `geminiService.ts`

---

## โจ ูู ุดูุก ุฌุงูุฒ ุงูุขู!

ููููู ุงูุขู:
1. โ ุฑูุน ุงูุณูุฑูุฑ ุนูู Render
2. โ ุชุดุบูู ุงูุชุทุจูู ูู Cordova
3. โ ุจูุงุก APK ุจุฏูู ุฃุฎุทุงุก

**ูุง ุชูุฌุฏ ุฃู ุฃุฎุทุงุก ูุชุจููุฉ!** ๐
